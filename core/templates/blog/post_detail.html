{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% block title %}
  {{ post.title }} | فروشگاه اینترنتی مکمل گوریلا
{% endblock %}
{% block content %}
  <main class="main">
    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">پست {{ post.id }}</h1>
        <nav class="breadcrumbs">
          <ol>
            <li>
              <a href="{% url 'website:index' %}">صفحه اصلی</a>
            </li>
            <li class="current">پست {{ post.id }}</li>
          </ol>
        </nav>
      </div>
    </div>
    <!-- End Page Title -->
    <!-- Page Title -->
    <div class="page-title">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1 class="heading-title">{{ post.title }}</h1>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Page Title -->

    <!-- Blog Details Section -->
    <section id="blog-details" class="blog-details section">
      <div class="container" data-aos="fade-up">
        <article class="article">
          <div class="hero-img" data-aos="zoom-in">
            <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid" loading="lazy" />
            <div class="meta-overlay">
              <div class="meta-categories">
                {% for category in post.category.all %}
                  <a href="#" class="category">{{ category.name }}</a>
                {% endfor %}

                <span class="divider">•</span>
                <span class="reading-time"><i class="bi bi-clock"></i> {{ post.published_at|naturaltime }}</span>
              </div>
            </div>
          </div>

          <div class="article-content" data-aos="fade-up" data-aos-delay="100">
            <div class="content-header">
              <h1 class="title">{{ post.title }}</h1>

              <div class="author-info">
                <div class="author-details">
                  <img src="{{ post.author.user_profile.image.url }}" alt="Author" class="author-img" />
                  <div class="info">
                    <h4>{{ post.author.user_profile.get_fullname }}</h4>
                  </div>
                </div>
                <div class="post-meta">
                  <span class="date"><i class="bi bi-eye"></i> {{ post.counted_views }}</span>
                  <span class="divider">•</span>
                  <span class="comments"><i class="bi bi-chat-text"></i> {{ post.comments.count }}</span>
                </div>
              </div>
            </div>

            <div class="content">
              <p>{{ post.content }}</p>

              <div class="highlight-box">
                <h3>دسته بندی ها</h3>
                <ul class="trend-list">
                  {% for category in post.category.all %}
                    <li>
                      <i class="bi bi-fire"></i>
                      <span>{{ category.name }}</span>
                    </li>
                  {% endfor %}
                </ul>
              </div>

              <h2>فروشگاه اینترنتی مکمل گوریلا</h2>
              <p>مرجعی تخصصی در زمینه فروش و معرفی انواع مکمل‌های ورزشی</p>

              <blockquote>
                <p>"توی این وبلاگ می‌تونی کلی اطلاعات کاربردی و جدید درباره مکمل‌ها پیدا کنی؛ از اینکه چی هستن و چطور باید استفاده بشن، تا اینکه چطور روی بدنت و نتیجه تمریناتت تأثیر می‌ذارن. علاوه بر اون، نکته‌های علمی و راحت‌فهمی هم درباره بهتر کردن تمرینات و رژیم غذایی برات گذاشتیم تا مسیرت توی ورزش خیلی ساده‌تر و موثرتر بشه."</p>
                <cite>با مدیریت جناب آقای ساسان قبادی</cite>
              </blockquote>

              <div class="content-grid">
                <div class="row g-4">
                  <div class="col-md-6">
                    <div class="info-card">
                      <i class="bi bi-universal-access"></i>
                      <h4>برنامه تمرینی اختصاصی گوریلا</h4>
                      <p>برنامه‌های گوریلا بر اساس ویژگی‌های فیزیکی، سابقه ورزشی، هدف اصلی (چربی‌سوزی، افزایش حجم خشک، تناسب اندام یا عملکرد ورزشی) و همچنین سبک زندگی و شرایط روزمره شما طراحی می‌شوند؛ تا مسیر پیشرفت‌تان نه‌ تنها مؤثر، بلکه کاملاً قابل اندازه‌گیری و پایدار باشد.</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="info-card">
                      <i class="bi bi-egg-fried"></i>

                      <h4>برنامه غذایی اختصاصی گوریلا</h4>
                      <p>تمام این موارد با پشتیبانی مداوم تیم تخصصی تغذیه و مربیان حرفه‌ای گوریلا همراه است؛ تیمی که در هر قدم کنار شماست تا برنامه‌تان را طبق روند پیشرفتتان به‌روزرسانی کرده و بهترین نتایج ممکن را تضمین کند.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="meta-bottom">
              <div class="tags-section">
                <h4>مباحث مرتبط</h4>
                <div class="tags">
                  {% for tag in post.tags.all %}
                    <a href="#" class="tag">{{ tag.name }}</a>
                  {% endfor %}
                </div>
              </div>

              <div class="share-section">
                <h4>اشتراک گذاری پست</h4>
                <div class="social-links">
                  <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a>
                  <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="facebook"><i class="bi bi-facebook"></i></a>
                  <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title }}" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a>
                </div>
              </div>
            </div>
          </div>
        </article>
      </div>
    </section>
    <!-- /Blog Details Section -->

    <!-- Blog Comments Section -->
    <section id="blog-comments" class="blog-comments section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="blog-comments-4">
          <div class="comments-header">
            <h3 class="title">بازخورد ها</h3>
            <div class="comments-stats">
              <span class="count">{{ post.comments.count }}</span>
              <span class="label"><i class="bi bi-chat-text"></i></span>
            </div>
          </div>

          <div class="comments-container">
            <!-- Comment #2 -->
            {% for comment in comments %}
              <div class="comment-thread">
                <div class="comment-box">
                  <div class="comment-wrapper">
                    <div class="comment-content">
                      <div class="comment-header">
                        <div class="user-info">
                          <h4>{{ comment.name }}</h4>
                          <span class="time-badge">
                            <i class="bi bi-clock"></i>
                            {{ comment.created_at|naturaltime }}
                          </span>
                        </div>
                        <div class="engagement">
                          <span class="likes"><i class="bi bi-heart"></i></span>
                        </div>
                      </div>

                      <div class="comment-body">
                        <p>{{ comment.comment }}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>
    <!-- /Blog Comments Section -->

    <!-- Blog Comment Form Section -->
    <section id="blog-comment-form" class="blog-comment-form section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <form method="post" role="form">
          {% csrf_token %}
          <div class="form-header">
            <h3>ثبت نظر</h3>
            <p>آدرس ایمیل شما منتشر نخواهد شد. فیلدهای ضروری با * مشخص شده‌اند.</p>
          </div>

          <div class="row gy-3">
            <div class="col-md-6">
              <div class="input-group">
                <label for="name">نام و نام خانوادگی *</label>
                <input type="text" name="name" id="name" placeholder="نام و نام خانوادگی خود را وارد کنید" required="" />
                <span class="error-text">لطفاً نام خود را وارد کنید</span>
              </div>
            </div>

            <div class="col-md-6">
              <div class="input-group">
                <label for="email">آدرس ایمیل *</label>
                <input type="email" name="email" id="email" placeholder="آدرس ایمیل خود را وارد کنید" required="" />
                <span class="error-text">لطفاً یک آدرس ایمیل معتبر وارد کنید</span>
              </div>
            </div>

            <div class="col-12">
              <div class="input-group">
                <label for="website">وب‌سایت</label>
                <input type="url" name="website" id="website" placeholder="وب‌سایت شما (اختیاری)" />
              </div>
            </div>

            <div class="col-12">
              <div class="input-group">
                <label for="comment">نظر شما *</label>
                <textarea name="comment" id="comment" rows="5" placeholder="اینجا نظر خود را بنویسید..." required=""></textarea>
                <span class="error-text">لطفاً نظر خود را وارد کنید</span>
              </div>
            </div>

            <div class="col-12 text-center">
              <button type="submit">ارسال نظر</button>
            </div>
          </div>
        </form>
      </div>
    </section>
    <!-- /Blog Comment Form Section -->
  </main>
{% endblock %}
